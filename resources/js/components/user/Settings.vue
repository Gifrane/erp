<template>
    <div class="settings">
        <div class="settings-left">
            <div class="settings-left-link" :class="{ active: tab === 'general' }" @click="switchTab('general')">
                <div class="left-link-svg">
                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13 0C5.82029 0 0 5.82029 0 13C0 20.1797 5.82029 26 13 26C20.1797 26 26 20.1797 26 13C26 5.82029 20.1797 0 13 0ZM11.7622 5.07812H14.2378L14.4774 7.46802C14.9699 7.59919 15.4368 7.79276 15.8676 8.04249L17.7274 6.52223L19.4778 8.27259L17.9575 10.1325C18.2072 10.5633 18.4008 11.0302 18.532 11.5226L20.9219 11.7622V14.2378L18.532 14.479C18.4008 14.9711 18.2071 15.4371 17.9575 15.8676L19.4778 17.7274L17.7274 19.4778L15.866 17.9576C15.4354 18.2071 14.9696 18.4009 14.4774 18.532L14.2378 20.9219H11.7622L11.521 18.532C11.0353 18.4027 10.5689 18.2095 10.134 17.9576L8.27257 19.4778L6.52221 17.7274L8.04247 15.866C7.7905 15.4311 7.59732 14.9647 7.468 14.479L5.0781 14.2378V11.7622L7.468 11.5226C7.59908 11.0304 7.79296 10.5646 8.04247 10.134L6.52221 8.27257L8.27257 6.52221L10.1324 8.04247C10.5629 7.79294 11.029 7.59917 11.521 7.468L11.7622 5.07812ZM13 10.7101C11.7352 10.7101 10.7101 11.7352 10.7101 13C10.7101 14.2648 11.7352 15.2899 13 15.2899C14.2648 15.2899 15.2899 14.2648 15.2899 13C15.2899 11.7352 14.2648 10.7101 13 10.7101Z" fill="black"/>
                    </svg>
                </div>

                <div>Général</div>

                <div class="left-link-gateway"></div>
            </div>

            <div class="settings-left-link" :class="{ active: tab === 'internationalisation' }" @click="switchTab('internationalisation')">
                <div class="left-link-svg">
                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 13C0 9.55219 1.36964 6.24558 3.80761 3.80761C6.24558 1.36964 9.55219 0 13 0C16.4478 0 19.7544 1.36964 22.1924 3.80761C24.6304 6.24558 26 9.55219 26 13C26 16.4478 24.6304 19.7544 22.1924 22.1924C19.7544 24.6304 16.4478 26 13 26C9.55219 26 6.24558 24.6304 3.80761 22.1924C1.36964 19.7544 0 16.4478 0 13ZM12.1875 1.75013C11.0988 2.08162 10.0181 3.08262 9.12113 4.7645C8.82559 5.32366 8.57141 5.90371 8.36063 6.5H12.1875V1.75013ZM6.64625 6.5C6.91709 5.63683 7.26517 4.79982 7.68625 3.99913C7.96722 3.46784 8.29171 2.96073 8.65637 2.483C6.64301 3.31797 4.91076 4.71188 3.66438 6.5H6.64625ZM5.7005 12.1875C5.74925 10.7624 5.92475 9.39575 6.2075 8.125H2.72025C2.11432 9.40071 1.75275 10.7786 1.65425 12.1875H5.7005ZM7.87638 8.125C7.55676 9.45718 7.37274 10.8183 7.32712 12.1875H12.1875V8.125H7.87638ZM13.8125 8.125V12.1875H18.6712C18.6262 10.8183 18.4427 9.45723 18.1236 8.125H13.8125ZM7.32875 13.8125C7.37383 15.1817 7.55731 16.5428 7.87638 17.875H12.1875V13.8125H7.32875ZM13.8125 13.8125V17.875H18.1236C18.4275 16.6319 18.6209 15.262 18.6729 13.8125H13.8125ZM8.36063 19.5C8.58488 20.1273 8.84 20.709 9.12113 21.2355C10.0181 22.9174 11.1004 23.9167 12.1875 24.2499V19.5H8.36063ZM8.65637 23.517C8.29168 23.0393 7.9672 22.5322 7.68625 22.0009C7.26517 21.2002 6.9171 20.3632 6.64625 19.5H3.66438C4.91069 21.2882 6.64296 22.6821 8.65637 23.517ZM6.2075 17.875C5.91364 16.5394 5.74392 15.1794 5.7005 13.8125H1.65425C1.755 15.2587 2.12713 16.6286 2.72025 17.875H6.2075ZM17.3436 23.517C19.357 22.6821 21.0893 21.2882 22.3356 19.5H19.3538C19.0829 20.3632 18.7348 21.2002 18.3138 22.0009C18.0329 22.5322 17.7084 23.0393 17.3436 23.517ZM13.8125 19.5V24.2499C14.9012 23.9184 15.9819 22.9174 16.8789 21.2355C17.16 20.709 17.4151 20.1273 17.6394 19.5H13.8125ZM19.7925 17.875H23.2798C23.8729 16.6286 24.245 15.2587 24.3458 13.8125H20.2995C20.2561 15.1794 20.0864 16.5394 19.7925 17.875ZM24.3458 12.1875C24.2472 10.7786 23.8856 9.40072 23.2798 8.125H19.7925C20.0753 9.39575 20.2507 10.7624 20.2995 12.1875H24.3458ZM18.3138 3.99913C18.7151 4.75312 19.0645 5.59163 19.3538 6.5H22.3356C21.0893 4.71182 19.357 3.31789 17.3436 2.483C17.6979 2.9445 18.0229 3.45475 18.3138 3.99913ZM17.6394 6.5C17.4286 5.9037 17.1744 5.32365 16.8789 4.7645C15.9819 3.08262 14.9012 2.08325 13.8125 1.75013V6.5H17.6394Z" fill="black"/>
                    </svg>
                </div>

                <div>{{ $t('pages.user_settings.internationalisation') }}</div>

                <div class="left-link-gateway"></div>
            </div>

            <div class="settings-left-link" :class="{ active: tab === 'security' }" @click="switchTab('security')">
                <div class="left-link-svg">
                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_22_23)">
                            <path d="M13 8.125C13.431 8.125 13.8443 8.29621 14.149 8.60095C14.4538 8.9057 14.625 9.31902 14.625 9.75V11.375H11.375V9.75C11.375 9.31902 11.5462 8.9057 11.851 8.60095C12.1557 8.29621 12.569 8.125 13 8.125ZM16.25 11.4985V9.75C16.25 8.88805 15.9076 8.0614 15.2981 7.4519C14.6886 6.84241 13.862 6.5 13 6.5C12.138 6.5 11.3114 6.84241 10.7019 7.4519C10.0924 8.0614 9.75 8.88805 9.75 9.75V11.4985C8.8725 11.7683 8.125 12.4686 8.125 13.4875V17.3875C8.125 18.7135 9.39412 19.5 10.5625 19.5H15.4375C16.6059 19.5 17.875 18.7135 17.875 17.3875V13.4875C17.875 12.4686 17.1275 11.7683 16.25 11.4985ZM9.92062 13.2031C10.106 13.0658 10.3319 12.9943 10.5625 13H15.4375C15.6681 12.9947 15.8939 13.0661 16.0794 13.2031C16.2175 13.3136 16.25 13.4193 16.25 13.4875V17.3875C16.25 17.4557 16.2175 17.5614 16.0794 17.6719C15.894 17.8092 15.6681 17.8807 15.4375 17.875H10.5625C10.3319 17.8807 10.106 17.8092 9.92062 17.6719C9.7825 17.5614 9.75 17.4557 9.75 17.3875V13.4875C9.75 13.4193 9.7825 13.3136 9.92062 13.2031Z" fill="black"/>
                            <path d="M6.5 0C5.63805 0 4.8114 0.34241 4.2019 0.951903C3.59241 1.5614 3.25 2.38805 3.25 3.25V22.75C3.25 23.612 3.59241 24.4386 4.2019 25.0481C4.8114 25.6576 5.63805 26 6.5 26H19.5C20.362 26 21.1886 25.6576 21.7981 25.0481C22.4076 24.4386 22.75 23.612 22.75 22.75V3.25C22.75 2.38805 22.4076 1.5614 21.7981 0.951903C21.1886 0.34241 20.362 0 19.5 0L6.5 0ZM6.5 1.625H19.5C19.931 1.625 20.3443 1.7962 20.649 2.10095C20.9538 2.4057 21.125 2.81902 21.125 3.25V22.75C21.125 23.181 20.9538 23.5943 20.649 23.899C20.3443 24.2038 19.931 24.375 19.5 24.375H6.5C6.06902 24.375 5.6557 24.2038 5.35095 23.899C5.0462 23.5943 4.875 23.181 4.875 22.75V3.25C4.875 2.81902 5.0462 2.4057 5.35095 2.10095C5.6557 1.7962 6.06902 1.625 6.5 1.625Z" fill="black"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_22_23">
                                <rect width="26" height="26" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </div>

                <div>{{ $t('pages.user_settings.security') }}</div>

                <div class="left-link-gateway"></div>
            </div>

            <div class="settings-left-link" :class="{ active: tab === 'notifications' }" @click="switchTab('notifications')">
                <div class="left-link-svg">
                    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_22_39)">
                            <path d="M13 26C13.862 26 14.6886 25.6576 15.2981 25.0481C15.9076 24.4386 16.25 23.612 16.25 22.75H9.75C9.75 23.612 10.0924 24.4386 10.7019 25.0481C11.3114 25.6576 12.138 26 13 26ZM14.6169 1.78588C14.6396 1.55993 14.6146 1.33173 14.5437 1.11601C14.4728 0.900286 14.3574 0.701824 14.2051 0.533422C14.0527 0.365021 13.8668 0.230419 13.6592 0.138298C13.4517 0.0461763 13.2271 -0.00141907 13 -0.00141907C12.7729 -0.00141907 12.5484 0.0461763 12.3408 0.138298C12.1332 0.230419 11.9473 0.365021 11.7949 0.533422C11.6426 0.701824 11.5272 0.900286 11.4563 1.11601C11.3854 1.33173 11.3604 1.55993 11.3831 1.78588C9.54642 2.15947 7.89526 3.15634 6.70924 4.60769C5.52323 6.05905 4.87524 7.87569 4.875 9.75C4.875 11.5343 4.0625 19.5 1.625 21.125H24.375C21.9375 19.5 21.125 11.5343 21.125 9.75C21.125 5.8175 18.33 2.535 14.6169 1.78588Z" fill="black"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_22_39">
                                <rect width="26" height="26" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </div>

                <div>{{ $t('notifications') }}</div>

                <div class="left-link-gateway"></div>
            </div>
        </div>

        <div class="settings-right">
            <tab-general v-if="tab === 'general'" />

            <tab-internationalisation :country_origin="country" :lang_origin="lang" :timezone_origin="timezone"
                v-if="tab === 'internationalisation'" />

            <tab-security v-if="tab === 'security'" />
            <tab-notifications v-if="tab === 'notifications'" />
        </div>
    </div>
</template>

<script>
import TabGeneral from './settings/General.vue'
import TabInternationalisation from './settings/Internationalisation.vue'
import TabNotifications from './settings/Notifications.vue'
import TabSecurity from './settings/Security.vue'

export default {
    components: { TabGeneral, TabInternationalisation, TabNotifications, TabSecurity },
    data: function () {
        return {
            tab: 'general',

            country: null,
            timezone: null,
            lang: null,

            enable_mail_notification: false,
        }
    },
    computed: {
        user: function () { return this.$store.getters['user/get_user'] }
    },
    created: function () {
        this.country = this.user.i18n_country_id
        this.timezone = this.user.timezone
        this.lang = this.user.lang

        this.getSettings()
    },
    methods: {
        switchTab: function (tab) {
            this.tab = tab
        },
        getSettings: function () {
            axios.post('/user/settings/details')
                .then((res) => {
                    let data = res.data.data

                    this.enable_mail_notification = data.enable_mail_notification
                })
                .catch((e) => {
                    this.checkAjaxException(e)
                })
        }
    }
}
</script>

<style lang="sass" scoped>
@import '../../../sass/vuejs/user/settings.sass'
</style>